@model proyectoPA.Entidades.Pelicula

@{
    ViewBag.Title = "Reservar Entrada";
}

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div class="container py-4">
        <h1>@Model.Titulo</h1>
        <img src="@Model.Poster_Url" alt="@Model.Titulo" class="img-fluid mb-3" />
        <p><strong>Duración:</strong> @Model.Duracion minutos</p>
        <p><strong>Director:</strong> @Model.Director</p>
        <p><strong>Clasificación:</strong> @Model.Clasificacion</p>

        @using (Html.BeginForm("ReservarPelicula", "Reserva", FormMethod.Post))
        {
            <div class="form-group">
                <label for="fecha">Fecha y Hora</label>
                <input type="datetime-local" id="fecha" name="fecha" class="form-control" required />
            </div>

            <div class="form-group">
                <label for="idSala">Sala</label>
                @Html.DropDownList("idSala", (SelectList)ViewBag.Salas, "Selecciona una sala", new { @class = "form-control" })
            </div>

            <div class="form-group">
                <label for="cantidadEntradas">Cantidad de Entradas</label>
                <input type="number" id="cantidadEntradas" name="cantidadEntradas" class="form-control" min="1" onchange="actualizarPrecio()" />
            </div>

            <div class="form-group">
                <p id="totalPrecio">Total: $0.00</p>
            </div>

            <button type="submit" class="btn btn-primary">Comprar</button>
            <a href="@Url.Action("Index", "Cartelera")" class="btn btn-secondary">Cancelar</a>
        }
    </div>
    <script>
        function actualizarPrecio() {
            var precio = 100; // Precio base, ajustar según la lógica
            var cantidad = parseInt(document.getElementById("cantidadEntradas").value, 10) || 0;
            var total = precio * cantidad;
            document.getElementById("totalPrecio").innerText = "Total: $" + total.toFixed(2);
        }
    </script>
</body>
